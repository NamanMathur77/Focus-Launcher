<ion-header>
  <ion-toolbar 
    [style.--background]="(backgroundColor$ | async) || '#000000'"
    [style.--color]="getTextColor((backgroundColor$ | async))">
    <ion-title [style.color]="getTextColor((backgroundColor$ | async))">Notes</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content 
  [style.--background]="(backgroundColor$ | async) || '#000000'"
  [style.color]="getTextColor((backgroundColor$ | async))">
  <div *ngIf="notes.length === 0" class="empty-state" [style.color]="getTextColor((backgroundColor$ | async))">
    <ion-label>Tap + to add your ideas, notes or whatever floats your boat.</ion-label>
  </div>

  <ion-list *ngIf="notes.length > 0" [style.background]="(backgroundColor$ | async) || '#000000'">
    <ion-card 
      *ngFor="let note of notes" 
      class="note-card"
      [style.background]="(backgroundColor$ | async) || '#000000'"
      [style.border]="'1px solid ' + getTextColor((backgroundColor$ | async))">
      <ion-card-header>
        <ion-card-title [style.color]="getTextColor((backgroundColor$ | async))">{{ note.title }}</ion-card-title>
        <div class="note-date" [style.color]="getTextColor((backgroundColor$ | async))">{{ formatDate(note.updatedAt) }}</div>
      </ion-card-header>
      <ion-card-content>
        <p [style.color]="getTextColor((backgroundColor$ | async))">{{ note.content }}</p>
        <div class="note-actions">
          <ion-button fill="clear" size="small" (click)="editNote(note)">
            <ion-icon slot="icon-only" name="create" [style.color]="getTextColor((backgroundColor$ | async))"></ion-icon>
          </ion-button>
          <ion-button fill="clear" size="small" color="danger" (click)="deleteNote(note)">
            <ion-icon slot="icon-only" name="trash"></ion-icon>
          </ion-button>
        </div>
      </ion-card-content>
    </ion-card>
  </ion-list>

  <ion-fab slot="fixed" vertical="bottom" horizontal="end">
    <ion-fab-button (click)="addNote()">
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>
